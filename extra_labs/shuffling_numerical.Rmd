---
title: "merging "
author:
date: The following slides contain **new** commands that can be used to enhance the lattice graphics used in the IDS Course.
output:
  slidy_presentation: default
  pdf_document: default
---

```{r setup, include=FALSE}
```

```{r, eval=TRUE, echo=FALSE, results='hide', message=FALSE, warning=FALSE}
library(mobilizr)
library(readr)
# colors <- read_csv("colors.csv")
colors <- extra_data("colors_ids")
colors <- colors_ids
```

## Titles and axes

#import stress data
#import colors data
######################################################
#stores the mean stress for each user as a vector
mean_stress<-mean(~stress|user.id, data=stress)
mean_stress
#stores the user ids corresponding to the means that were computed in mean_stress
stress_ids <- names(mean_stress)
#we need to put these into a data frame to be able to utilize the merge function
df <- data.frame(user.id = stress_ids, mean_stress = mean_stress)
#included for formatting purposes
names(mean_stress) <- NULL
#after formatting
df <- data.frame(user.id = stress_ids, mean_stress = mean_stress)
#a data frame with all of the colors variables plus the mean stress variable
#derived from the stress data
stress_colors<-merge(colors,df,by="user.id")

######################################################
avg_stress<-tibble("user.id" = names(mean(~stress|user.id, data=stress)),
                      "mean_stress"= mean(~stress|user.id, data=stress))

stress_colors<-merge(colors, avg_stress,by="user.id")

######################################################

#the syntax for summarize is similar to that of mutate
summarize(stress, mean_stress = mean(stress))
summarize(group_by(stress,user.id), mean_stress = mean(stress))
df<-summarize(group_by(stress,user.id), mean_stress = mean(stress))
stress_colors2<-merge(colors,df,by="user.id")

#####################
colors_stress3 <- stress %>%
  group_by(user.id) %>%
  summarize(mean_stress = mean(stress)) %>%
  merge(colors, by = "user.id")